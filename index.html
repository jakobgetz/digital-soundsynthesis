<!DOCTYPE html>
<html lang="en">
  <head>
    <meta
      author="Jakob Getz"
      university="Hochschule der Medien Stuttgart"
      email="jg123@hdm-stuttgart.de"
    />
    <title>Custom Wave Shapes</title>
  </head>
  <body>
    <h2>Custom Wave Shapes</h2>
    <p>
      Please put down your Volume a little bit, so you wont get potentially hurt
    </p>

    <!--Create Input Elements-->
    <!--Start AudioContext-->
    <button onclick="startAudioContext()">Start AudioContext</button>
    <br />

    <!--On/Off-->
    <button onclick="connect()">On</button>
    <button onclick="disconnect()">Off</button>
    <br />

    <!--Javascript-->
    <script>
      // define variables
      let context;
      let oscillator;

      // define functions
      const startAudioContext = () => {
        context = new AudioContext();
        oscillator = context.createOscillator();
        oscillator.start();

        oscillator.setPeriodicWave(createSawtooth());
      };

      const connect = () => oscillator.connect(context.destination);
      const disconnect = () => oscillator.disconnect();

      const createSine = () => {
        const real = new Float32Array(2);
        const imag = new Float32Array(2);
        imag[1] = 1;
        return context.createPeriodicWave(real, imag);
      };

      const createSawtooth = () => {
        const resolution = 1024;
        const real = new Float32Array(resolution);
        const imag = new Float32Array(resolution);

        for (let k = 1; k < resolution; k++) {
          real[k] = 0;
          imag[k] = (1 / k) * 1;
        }
        return context.createPeriodicWave(real, imag);
      };
    </script>
  </body>
</html>
